<header>
  <nav class="navbar navbar-expand-sm navbar-toggleable-sm border-bottom box-shadow mb-3 tp-gradient-standard">
    <div class="container">
      <a class="navbar-brand fs-5" [routerLink]="['/']">Planyourtrip.com - plan your trips with us</a>
      <button class = "navbar-toggler" type = "button" data-bs-toggle = "collapse" data-bs-target = ".navbar-collapse" aria-controls = "navbarSupportedContent" aria-expanded = "false" aria-label = "Toggle navigation">
        <span class = "navbar-toggler-icon"></span>
      </button>
      <div class = "navbar-collapse collapse d-sm-inline-flex justify-content-between">
        <ul class = "navbar-nav flex-grow-1">
          <li class = "nav-item dropdown">
            <a class = "nav-link dropdown-toggle fs-5" href = "#" id = "navbarDropdown" role = "button" data-bs-toggle = "dropdown" aria-expanded = "false">Main Menu</a>
            <ul class = "dropdown-menu tp-gradient-standard fs-5" aria-labelledby = "navbarDropdown">
              <li [routerLinkActive]="['link-active']" [routerLinkActiveOptions]="{ exact: true }">
                <a class="dropdown-item" [routerLink]="['/']">Home</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/trips/create']">Create a trip</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/trips']">My trips</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/trips/history']">History</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/trips/activity']">Activity</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/statistics/heatmap']">Heatmap</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/statistics/durations']">Trips duration statistics</a>
              </li>
            </ul>
          </li>
          <li *ngIf="userInfo.role === 'Admin'" class = "nav-item dropdown">
            <a class = "nav-link dropdown-toggle fs-5" href = "#" id = "navbarDropdownAdmin" role = "button" data-bs-toggle = "dropdown" aria-expanded = "false">Admin Menu</a>
            <ul class = "dropdown-menu tp-gradient-standard fs-5" aria-labelledby = "navbarDropdownAdmin">
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/admin/trips']">Trips of all users</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class="dropdown-item" [routerLink]="['/admin/trips/create']">Create a trip</a>
              </li>
            </ul>
          </li>
          <li class=" fs-5 nav-item" [routerLinkActive]="['link-active']">
            <a class="nav-link" [routerLink]="['/drivers']">Our drivers</a>
          </li>
          <li class=" fs-5 nav-item" [routerLinkActive]="['link-active']">
            <a class="nav-link" [routerLink]="['/chats']">Chats</a>
          </li>
        </ul>
        <div class = "nav-item dropdown mr-50 fs-5" *ngIf="userInfo.userName; else authUserMenu">
          <a class = "nav-link dropdown-toggle" href = "#" id = "navbarUserDropdown" role = "button" data-bs-toggle = "dropdown" aria-expanded = "false">Welcome back, {{ userInfo.userName }}</a>
          <ul class = "dropdown-menu tp-gradient-standard" aria-labelledby = "navbarUserDropdown">
            <li>
              <a class = "dropdown-item" (click)="logout()">Log out</a>
            </li>
          </ul>
        </div>
        <ng-template #authUserMenu>
          <div class = "nav-item dropdown fs-5">
            <a class = "nav-link dropdown-toggle" href = "#" id = "navbarUserDropdown" role = "button" data-bs-toggle = "dropdown" aria-expanded = "false">Account</a>
            <ul class = "dropdown-menu tp-gradient-standard fs-5" aria-labelledby = "navbarUserDropdown">
              <li [routerLinkActive]="['link-active']">
                <a class = "dropdown-item" [routerLink]="['/login']">Login</a>
              </li>
              <li>
                <hr class = "dropdown-divider">
              </li>
              <li [routerLinkActive]="['link-active']">
                <a class = "dropdown-item" [routerLink]="['/register']">Sign up</a>
              </li>
            </ul>
          </div>
        </ng-template>
        <div class="notification-icon" (click)="toggleNotificationsExpanded()">
          <span class="badge badge-danger notifications-counter" *ngIf="notificationsService.notifications.length > 0"> {{notificationsService.notifications.length}}</span>
          <div class="notifications-dropdown" [hidden]="!notificationsListExpanded">
            <div class="notification-container mt-2 tp-gradient-reverse" *ngFor = "let notification of notificationsService.notifications" (click)="notificationsService.deleteAndRedirectToChat(notification.id!, notification.chatId)">
              <h5 class="tp-label">{{notification.chatName}}</h5>
              <h5 class="tp-label mt-1">{{notification.user.userName}}:</h5>
              <div class="notification-text-container">{{notification.text}}</div>
              <span (click)="deleteNotification($event, notification.id!)" class="mt-3 tp-label">Mark as read</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
